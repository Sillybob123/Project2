<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hebrew Remembrance Songs: A Curated Library</title>
    <style>
        :root {
            --primary-color: #3a506b; /* Deeper blue */
            --secondary-color: #5bc0de; /* Lighter blue accent */
            --accent-color: #d9534f; /* Muted red for emphasis */
            --text-color: #333;
            --background-color: #f9f9f9;
            --card-background: #ffffff;
            --border-color: #e0e0e0;
            --hebrew-color: #8b4513;
            --english-color: #2c3e50;
            --transliteration-color: #6c757d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.7;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), #1c2541);
            color: white;
            padding: 2.5rem 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .header-content h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .header-content p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 650px;
            margin: 0 auto;
        }

        .navigation {
            background: var(--card-background);
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-content {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .nav-button {
            background: none;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-button:hover,
        .nav-button.active {
            background: var(--primary-color);
            color: white;
        }

        .main-content {
            padding: 2rem 0;
        }

        /* Library Section */
        #library-section {
            display: block;
        }

        .library-controls {
            background: var(--card-background);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex;
            gap: 1.5rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-bar {
            flex: 1;
            min-width: 300px;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .search-bar:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .tag-filters button {
            background: #e9ecef;
            color: #495057;
            border: 1px solid #dee2e6;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            margin: 0.25rem;
            transition: all 0.2s ease-in-out;
        }

        .tag-filters button.active {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .song-library {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .song-card {
            background: var(--card-background);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border-left: 5px solid var(--secondary-color);
            display: flex;
            flex-direction: column;
        }

        .song-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }

        .song-card h3 {
            color: var(--primary-color);
            margin-bottom: 0.25rem;
            font-size: 1.4rem;
        }

        .song-card .hebrew-title {
            color: var(--hebrew-color);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            direction: rtl;
            text-align: right;
        }

        .song-card .artist {
            color: var(--secondary-color);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .song-card .description {
            color: #6c757d;
            font-size: 0.95rem;
            line-height: 1.5;
            flex-grow: 1;
            margin-bottom: 1rem;
        }

        .song-card .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .song-card .tag {
            background: #e9ecef;
            color: #495057;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        
        #no-results {
            text-align: center;
            padding: 3rem;
            font-size: 1.2rem;
            color: #6c757d;
            grid-column: 1 / -1;
        }

        /* Player Section */
        .player-section {
            background: var(--card-background);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none; /* Hidden by default */
        }
        
        .player-section.active {
            display: block;
        }

        .back-button {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .back-button:hover {
            background: #c0392b;
        }

        .player-header {
            text-align: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 1.5rem;
        }

        .player-header h2 {
            color: var(--primary-color);
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        /* ... other player styles from previous version ... */
        .player-header .hebrew-title { color: var(--hebrew-color); font-size: 1.8rem; direction: rtl; margin-bottom: 0.5rem; }
        .player-header .artist { color: var(--secondary-color); font-size: 1.3rem; font-weight: 500; }
        .youtube-embed { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin-bottom: 2rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .youtube-embed iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 12px; }
        .lyrics-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem; }
        .lyrics-column { background: #f9f9f9; padding: 1.5rem; border-radius: 8px; border-top: 4px solid; max-height: 500px; overflow-y: auto; }
        .hebrew-lyrics { border-top-color: var(--hebrew-color); direction: rtl; text-align: right; }
        .english-lyrics { border-top-color: var(--english-color); }
        .transliteration-lyrics { border-top-color: var(--transliteration-color); }
        .lyrics-column h3 { margin-bottom: 1rem; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; position: sticky; top: 0; background: #f9f9f9; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color); }
        .hebrew-lyrics h3 { color: var(--hebrew-color); }
        .english-lyrics h3 { color: var(--english-color); }
        .transliteration-lyrics h3 { color: var(--transliteration-color); }
        .lyric-line { margin-bottom: 1rem; padding: 0.75rem; border-radius: 6px; transition: all 0.3s ease; cursor: default; border-left: 3px solid transparent; line-height: 1.6; }
        .cultural-context { background: linear-gradient(135deg, #f9f9f9, #e9ecef); padding: 2rem; border-radius: 12px; margin-top: 2rem; border-left: 4px solid var(--accent-color); }
        .cultural-context h3 { color: var(--primary-color); margin-bottom: 1rem; font-size: 1.4rem; }
        .cultural-context p, .cultural-context li { color: #495057; line-height: 1.8; margin-bottom: 1rem; }
        .ai-analysis { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; }
        .ai-analysis h3 { margin-bottom: 1rem; font-size: 1.4rem; }
        .analysis-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .analysis-card { background: rgba(255, 255, 255, 0.1); padding: 1rem; border-radius: 8px; }
        .analysis-card h4 { margin-bottom: 0.5rem; color: #ffd700; }

        /* About Section */
        #about-section {
            background: var(--card-background);
            padding: 2rem;
            border-radius: 12px;
            display: none; /* Hidden by default */
        }

        footer {
            background: var(--primary-color);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content h1 { font-size: 2.2rem; }
            .song-library { grid-template-columns: 1fr; }
            .lyrics-container { grid-template-columns: 1fr; }
            .library-controls { flex-direction: column; align-items: stretch; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>Hebrew Remembrance Songs</h1>
                <p>A curated library of translated songs for Yom HaZikaron, Yom HaShoah, and moments of reflection.</p>
            </div>
        </div>
    </header>

    <nav class="navigation">
        <div class="container">
            <div class="nav-content">
                <button class="nav-button active" onclick="showView('library-section')">üìö Song Library</button>
                <button class="nav-button" onclick="showView('about-section')">‚ÑπÔ∏è About This Project</button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            
            <section id="library-section">
                <div class="library-controls">
                    <input type="text" id="search-bar" class="search-bar" placeholder="Search for a song or artist...">
                    <div id="tag-filters" class="tag-filters">
                        </div>
                </div>
                <div id="song-library" class="song-library">
                    </div>
                <div id="no-results" style="display: none;">No songs found matching your search.</div>
            </section>

            <section id="player-section" class="player-section">
                <button class="back-button" onclick="showView('library-section')">‚Üê Back to Library</button>
                
                <div class="player-header">
                    <h2 id="song-title">Song Title</h2>
                    <div class="hebrew-title" id="hebrew-title">◊õ◊ï◊™◊®◊™ ◊ë◊¢◊ë◊®◊ô◊™</div>
                    <div class="artist" id="song-artist">Artist Name</div>
                </div>

                <div class="youtube-embed" id="youtube-embed-container"></div>

                <div class="ai-analysis">
                    <h3>Song Analysis</h3>
                    <div class="analysis-grid">
                        <div class="analysis-card"><h4>Theme</h4><p id="song-theme"></p></div>
                        <div class="analysis-card"><h4>Era</h4><p id="song-era"></p></div>
                        <div class="analysis-card"><h4>Emotional Tone</h4><p id="song-emotion"></p></div>
                        <div class="analysis-card"><h4>For Learners</h4><p id="song-difficulty"></p></div>
                    </div>
                </div>

                <div class="lyrics-container">
                    <div class="lyrics-column hebrew-lyrics"><h3>◊¢◊ë◊®◊ô◊™ (Hebrew)</h3><div id="hebrew-lyrics"></div></div>
                    <div class="lyrics-column english-lyrics"><h3>English</h3><div id="english-lyrics"></div></div>
                    <div class="lyrics-column transliteration-lyrics"><h3>Pronunciation</h3><div id="transliteration-lyrics"></div></div>
                </div>

                <div class="cultural-context">
                    <h3>Background & Significance</h3>
                    <div id="song-context"></div>
                </div>
            </section>
            
            <section id="about-section">
                <h2>About This Project</h2>
                <p>This project was created to provide a meaningful resource for understanding the profound, beautiful, and often heartbreaking songs that form the soundtrack of Israeli and Jewish remembrance.</p>
                <p>Music is a powerful conduit for history, emotion, and collective memory. For those who do not speak Hebrew, the depth of these songs can be lost. This library aims to bridge that gap by providing not just literal translations, but poetic interpretations, accurate pronunciation guides (transliterations), and the cultural and historical context necessary to fully appreciate each piece.</p>
                <h3>Features:</h3>
                <ul>
                    <li><strong>Curated Selection:</strong> A hand-picked collection of songs for Yom HaZikaron (Israel's Memorial Day), Yom HaShoah (Holocaust Remembrance Day), and general themes of peace, loss, and hope.</li>
                    <li><strong>In-Depth Translations:</strong> Each song is presented with its original Hebrew, a meaningful English translation, and a phonetic transliteration.</li>
                    <li><strong>Cultural Context:</strong> Understand the story behind the song‚Äîwho wrote it, when, why, and what it means to the people who sing it.</li>
                    <li><strong>Search and Filter:</strong> Easily find songs by title, artist, or theme using the library's search and tag filters.</li>
                </ul>
                <p>This is a living project. We hope it serves as a valuable tool for education, connection, and remembrance.</p>
            </section>

        </div>
    </main>

    <footer>
        <div class="container">
            <p>Preserving memory through music. Making Hebrew songs accessible to the world.</p>
        </div>
    </footer>

<script>
// =================================================================================
//  SONG DATABASE
//  This is where all the pre-translated song data is stored.
//  To add a new song, simply copy an existing object and paste it at the end of the array.
// =================================================================================
const songDatabase = [
    {
        id: 'hachoref-haacharon',
        title: 'The Last Winter',
        hebrewTitle: '◊î◊ó◊ï◊®◊£ ◊î◊ê◊ó◊®◊ï◊ü',
        artist: 'Hava Alberstein',
        youtubeId: 'UduJG5bUPEA',
        description: 'A heart-wrenching song written by Avi Koren in memory of his brother who fell in the Yom Kippur War.',
        tags: ['Yom HaZikaron', 'Loss', 'Yom Kippur War'],
        lyrics: {
            hebrew: [
                '◊ê◊ó◊ô ◊î◊ò◊ï◊ë, ◊î◊ë◊ü ◊î◊ô◊§◊î ◊©◊ú◊ô',
                '◊î◊ó◊ï◊®◊£ ◊î◊ê◊ó◊®◊ï◊ü ◊©◊ú◊ö ◊¢◊õ◊©◊ô◊ï ◊î◊í◊ô◊¢',
                '◊ê◊ó◊ô ◊î◊ò◊ï◊ë, ◊î◊ë◊ü ◊î◊ô◊§◊î ◊©◊ú◊ô',
                '◊ê◊™◊î ◊©◊ï◊û◊¢ ◊ê◊ô◊ö ◊î◊®◊ï◊ó ◊û◊ô◊ô◊ú◊ú◊™?',
                '◊ï◊û◊™◊ó◊™ ◊ú◊©◊û◊ô◊õ◊î ◊î◊õ◊ë◊ì◊î',
                '◊ê◊™◊î ◊©◊ï◊õ◊ë ◊ß◊®, ◊ê◊™◊î ◊ú◊ê ◊†◊ï◊©◊ù',
                '◊ë◊ó◊ï◊®◊£ ◊î◊ñ◊î ◊õ◊ë◊® ◊ú◊ê ◊™◊î◊ô◊î ◊õ◊ê◊ü',
                '◊ê◊ó◊ô ◊î◊ò◊ï◊ë, ◊î◊ë◊ü ◊î◊ô◊§◊î ◊©◊ú◊ô'
            ],
            english: [
                'My good brother, my beautiful son',
                'Your last winter has now arrived',
                'My good brother, my beautiful son',
                'Do you hear how the wind is wailing?',
                'And under the heavy blanket',
                'You lie cold, you are not breathing',
                'This winter, you will no longer be here',
                'My good brother, my beautiful son'
            ],
            transliteration: [
                'Achi hatov, haben hayafa sheli',
                'Hachoref ha\'acharon shelcha achshav hegia',
                'Achi hatov, haben hayafa sheli',
                'Ata shome\'a eich haruach meyal√©let?',
                'Umitachat lasmicha hakveda',
                'Ata shochev kar, ata lo noshem',
                'Bachoref haze kvar lo tihye kan',
                'Achi hatov, haben hayafa sheli'
            ]
        },
        context: "Written by Avi Koren about his brother, Shmuel Avraham Koren, who was killed in the Yom Kippur War. The song captures the raw, personal grief of a family member dealing with the finality of loss, contrasting the coldness of death with the warmth of memory. It has become an anthem of personal bereavement on Yom HaZikaron.",
        analysis: {
            theme: 'Personal Grief',
            era: '1970s',
            emotion: 'Melancholic, Mournful',
            difficulty: 'Intermediate'
        }
    },
    {
        id: 'lu-yehi',
        title: 'Let It Be',
        hebrewTitle: '◊ú◊ï ◊ô◊î◊ô',
        artist: 'Naomi Shemer',
        youtubeId: 'PhO8a_j-22E',
        description: 'An iconic prayer for peace, written by Naomi Shemer during the intense uncertainty of the Yom Kippur War.',
        tags: ['Hope', 'Peace', 'Yom Kippur War'],
        lyrics: {
            hebrew: [
                '◊¢◊ï◊ì ◊ô◊© ◊û◊§◊®◊© ◊ú◊ë◊ü ◊ë◊ê◊ï◊§◊ß',
                '◊û◊ï◊ú ◊¢◊†◊ü ◊©◊ó◊ï◊® ◊õ◊ë◊ì',
                '◊õ◊ú ◊©◊†◊ë◊ß◊© ◊ú◊ï ◊ô◊î◊ô',
                '◊ï◊ê◊ù ◊§◊™◊ê◊ï◊ù ◊ô◊ñ◊®◊ó ◊û◊ê◊ï◊§◊ú',
                '◊¢◊ú ◊®◊ê◊©◊†◊ï ◊ê◊ï◊® ◊õ◊ï◊õ◊ë',
                '◊õ◊ú ◊©◊†◊ë◊ß◊© ◊ú◊ï ◊ô◊î◊ô.',
                '◊ú◊ï ◊ô◊î◊ô, ◊ú◊ï ◊ô◊î◊ô',
                '◊ê◊†◊ê, ◊ú◊ï ◊ô◊î◊ô',
                '◊õ◊ú ◊©◊†◊ë◊ß◊© ◊ú◊ï ◊ô◊î◊ô.'
            ],
            english: [
                'There is still a white sail on the horizon',
                'Against a heavy, black cloud',
                'All that we ask for, let it be.',
                'And if suddenly, from the darkness, there shines',
                'Above our heads the light of a star',
                'All that we ask for, let it be.',
                'Let it be, let it be',
                'Please, let it be',
                'All that we ask for, let it be.'
            ],
            transliteration: [
                'Od yesh mifras lavan ba\'ofek',
                'Mul anan shachor kaved',
                'Kol shenevakesh lu yehi',
                'Ve\'im pitom yizrach me\'ofel',
                'Al rosheinu or kochav',
                'Kol shenevakesh lu yehi.',
                'Lu yehi, lu yehi',
                'Ana, lu yehi',
                'Kol shenevakesh lu yehi.'
            ]
        },
        context: "Naomi Shemer wrote this song in 1973 as a Hebrew response to the Beatles' 'Let It Be,' but it quickly took on a life of its own as a national prayer during the Yom Kippur War. It expresses a deep yearning for an end to suffering and a return to normalcy and peace, becoming a timeless Israeli anthem of hope.",
        analysis: {
            theme: 'Hope & Peace',
            era: '1970s',
            emotion: 'Hopeful, Prayerful',
            difficulty: 'Beginner'
        }
    },
    {
        id: 'eli-eli',
        title: 'My God, My God (A Walk to Caesarea)',
        hebrewTitle: '◊ê◊ú◊ô, ◊ê◊ú◊ô (◊î◊ú◊ô◊õ◊î ◊ú◊ß◊ô◊°◊®◊ô◊î)',
        artist: 'Hannah Szenes',
        youtubeId: 'QTQdu1j_y5g',
        description: 'A famous poem by Hannah Szenes, a paratrooper who was captured and executed during WWII.',
        tags: ['Yom HaShoah', 'Hope', 'Poetry'],
        lyrics: {
            hebrew: [
                '◊ê◊ú◊ô, ◊ê◊ú◊ô',
                '◊©◊ú◊ê ◊ô◊í◊û◊® ◊ú◊¢◊ï◊ú◊ù',
                '◊î◊ó◊ï◊ú ◊ï◊î◊ô◊ù',
                '◊®◊©◊®◊ï◊© ◊©◊ú ◊î◊û◊ô◊ù',
                '◊ë◊®◊ß ◊î◊©◊û◊ô◊ô◊ù',
                '◊™◊§◊ô◊ú◊™ ◊î◊ê◊ì◊ù'
            ],
            english: [
                'My God, my God',
                'May it never end',
                'The sand and the sea',
                'The rush of the water',
                'The crash of the heavens',
                'The prayer of man.'
            ],
            transliteration: [
                'Eli, Eli',
                'Shelo yigamer le\'olam',
                'Hachol vehayam',
                'Rishrush shel hamayim',
                'Brak hashamayim',
                'Tefilat ha\'adam'
            ]
        },
        context: "Written in 1942 by Hannah Szenes, a poet and Special Operations Executive paratrooper. She was captured behind enemy lines in Hungary and executed in 1944. The poem, filled with imagery of nature's eternity, is a powerful plea for hope and continuity in the face of immense darkness. It is a cornerstone of Yom HaShoah commemorations.",
        analysis: {
            theme: 'Endurance & Hope',
            era: '1940s',
            emotion: 'Wistful, Hopeful',
            difficulty: 'Beginner'
        }
    },
    {
        id: 'ein-li-eretz-acheret',
        title: 'I Have No Other Country',
        hebrewTitle: '◊ê◊ô◊ü ◊ú◊ô ◊ê◊®◊• ◊ê◊ó◊®◊™',
        artist: 'Gali Atari (words by Ehud Manor)',
        youtubeId: '1zPhm-aEGJg',
        description: 'A powerful anthem of belonging and resilience, expressing a deep, sometimes painful, love for Israel.',
        tags: ['Hope', 'Resilience', 'Peace'],
        lyrics: {
            hebrew: [
                '◊ê◊ô◊ü ◊ú◊ô ◊ê◊®◊• ◊ê◊ó◊®◊™',
                '◊í◊ù ◊ê◊ù ◊ê◊ì◊û◊™◊ô ◊ë◊ï◊¢◊®◊™',
                '◊®◊ß ◊û◊ô◊ú◊î ◊ë◊¢◊ë◊®◊ô◊™ ◊ó◊ï◊ì◊®◊™',
                '◊ê◊ú ◊¢◊ï◊®◊ß◊ô◊ô, ◊ê◊ú ◊†◊©◊û◊™◊ô',
                '◊ë◊í◊ï◊§◊ô ◊î◊õ◊ï◊ê◊ë',
                '◊ë◊ú◊ë ◊î◊®◊¢◊ë',
                '◊§◊î ◊î◊ï◊ê ◊ë◊ô◊™◊ô.'
            ],
            english: [
                'I have no other country',
                'Even if my land is burning',
                'Only a word in Hebrew penetrates',
                'Into my veins, into my soul',
                'With an aching body',
                'With a hungry heart',
                'Here is my home.'
            ],
            transliteration: [
                'Ein li eretz acheret',
                'Gam im admati bo\'eret',
                'Rak milah be\'ivrit choderet',
                'El orakai, el nishmati',
                'Begufi hako\'ev',
                'Balev hara\'ev',
                'Po hu beiti.'
            ]
        },
        context: "With lyrics by Ehud Manor and music by Corinne Allal, this song became an anthem of the Israeli peace movement. Written during the First Lebanon War, it conveys a message of fierce attachment to the land, even amidst pain and disagreement. It speaks to the idea that despite its flaws and conflicts, Israel is the only home for its people, a place they will not abandon.",
        analysis: {
            theme: 'Patriotism & Resilience',
            era: '1980s',
            emotion: 'Defiant, Passionate',
            difficulty: 'Intermediate'
        }
    },
    {
        id: 'shir-hareut',
        title: 'The Song of Friendship',
        hebrewTitle: '◊©◊ô◊® ◊î◊®◊¢◊ï◊™',
        artist: 'The Chizbatron (words by Haim Gouri)',
        youtubeId: 'SjgXf7pE-oM',
        description: 'An iconic song of camaraderie and loss, written during the 1948 War of Independence.',
        tags: ['Yom HaZikaron', 'Friendship', 'War of Independence'],
        lyrics: {
            hebrew: [
                '◊¢◊ú ◊î◊†◊í◊ë ◊ô◊ï◊®◊ì ◊ú◊ô◊ú ◊î◊°◊™◊ô◊ï',
                '◊ï◊û◊¶◊ô◊™ ◊õ◊ï◊õ◊ë◊ô◊ù ◊ó◊®◊© ◊ó◊®◊©',
                '◊¢◊™ ◊î◊®◊ï◊ó ◊¢◊ï◊ë◊® ◊¢◊ú ◊î◊°◊£',
                '◊¢◊†◊†◊ô◊ù ◊û◊î◊ú◊õ◊ô◊ù ◊¢◊ú ◊î◊ì◊®◊ö.',
                '◊î◊®◊¢◊ï◊™ ◊†◊©◊ê◊†◊ï◊ö ◊ë◊ú◊ô ◊û◊ô◊ú◊ô◊ù',
                '◊ê◊§◊ï◊®◊î, ◊¢◊ß◊©◊†◊ô◊™ ◊ï◊©◊ï◊™◊ß◊™',
                '◊ï◊†◊ñ◊õ◊ï◊® ◊ê◊™ ◊õ◊ï◊ú◊ù',
                '◊ê◊™ ◊ô◊§◊ô ◊î◊ë◊ú◊ï◊®◊ô◊™ ◊ï◊î◊™◊ï◊ê◊®.'
            ],
            english: [
                'The autumn night descends on the Negev',
                'And quietly, quietly, lights the stars',
                'As the wind passes over the threshold',
                'Clouds are walking on the road.',
                'The friendship, we carried you without words',
                'Gray, stubborn and silent',
                'And we will remember them all',
                'The ones with the handsome hair and stature.'
            ],
            transliteration: [
                'Al haNegev yored leil hastav',
                'Umatzit kochavim cheresh cheresh',
                'Et haruach over al hasaf',
                'Ananim mehalchim al haderech.',
                'HaRe\'ut nasanuch bli milim',
                'Aforah, akshanit veshoketet',
                'Venizkor et kulam',
                'Et yefei hablorit vehatoar.'
            ]
        },
        context: "Written by Haim Gouri during the 1948 War of Independence, this song is the ultimate anthem of comradeship ('Re\'ut') among soldiers. It speaks of the silent, unbreakable bond between those who fought together and the promise to remember those who fell. Its somber melody and powerful lyrics have made it a central part of Israeli memorial ceremonies.",
        analysis: {
            theme: 'Friendship & Remembrance',
            era: '1940s',
            emotion: 'Solemn, Nostalgic',
            difficulty: 'Advanced'
        }
    },
    {
        id: 'yerushalayim-shel-zahav',
        title: 'Jerusalem of Gold',
        hebrewTitle: '◊ô◊®◊ï◊©◊ú◊ô◊ù ◊©◊ú ◊ñ◊î◊ë',
        artist: 'Naomi Shemer',
        youtubeId: 'l0d-P7Y_pLM',
        description: 'A deeply poetic and longing ode to Jerusalem, written just before the Six-Day War that reunified the city.',
        tags: ['Hope', 'Jerusalem', 'Six-Day War'],
        lyrics: {
            hebrew: [
                '◊ê◊ï◊ï◊ô◊® ◊î◊®◊ô◊ù ◊¶◊ú◊ï◊ú ◊õ◊ô◊ô◊ü',
                '◊ï◊®◊ô◊ó ◊ê◊ï◊®◊†◊ô◊ù',
                '◊†◊ô◊©◊ê ◊ë◊®◊ï◊ó ◊î◊¢◊®◊ë◊ô◊ô◊ù',
                '◊¢◊ù ◊ß◊ï◊ú ◊§◊¢◊û◊ï◊†◊ô◊ù.',
                '◊ô◊®◊ï◊©◊ú◊ô◊ù ◊©◊ú ◊ñ◊î◊ë',
                '◊ï◊©◊ú ◊†◊ó◊ï◊©◊™ ◊ï◊©◊ú ◊ê◊ï◊®',
                '◊î◊ú◊ê ◊ú◊õ◊ú ◊©◊ô◊®◊ô◊ö ◊ê◊†◊ô ◊õ◊ô◊†◊ï◊®.'
            ],
            english: [
                'Mountain air as clear as wine',
                'And the scent of pines',
                'Is carried on the evening wind',
                'With the sound of bells.',
                'Jerusalem of gold',
                'And of copper and of light',
                'Am I not a violin for all your songs?'
            ],
            transliteration: [
                'Avir harim tzalul kayayin',
                'Ve\'reach oranim',
                'Nisa be\'ruach ha\'arbayim',
                'Im kol pa\'amonim.',
                'Yerushalayim shel zahav',
                'Veshel nechoshet veshel or',
                'Halo lechol shirayich ani kinor.'
            ]
        },
        context: "Composed by Naomi Shemer for the 1967 Israeli Song Festival. Written just weeks before the Six-Day War, it expressed the 2,000-year-old Jewish yearning for a return to an inaccessible, divided Jerusalem. After the war, when the Old City was captured by Israeli forces, Shemer added a triumphant final verse. It is considered Israel's unofficial second national anthem.",
        analysis: {
            theme: 'Longing & Homecoming',
            era: '1960s',
            emotion: 'Yearning, Reverent',
            difficulty: 'Intermediate'
        }
    },
    {
        id: 'milyon-kochavim',
        title: 'A Million Stars',
        hebrewTitle: '◊û◊ô◊ú◊ô◊ï◊ü ◊õ◊ï◊õ◊ë◊ô◊ù',
        artist: 'Amit Farkash',
        youtubeId: 'QZovYp8y5gE',
        description: 'A touching song written by a friend in memory of Tom Farkash, an Air Force pilot killed in the Second Lebanon War.',
        tags: ['Yom HaZikaron', 'Loss', 'Second Lebanon War'],
        lyrics: {
            hebrew: [
                '◊ô◊© ◊û◊ô◊ú◊ô◊ï◊ü ◊õ◊ï◊õ◊ë◊ô◊ù ◊î◊ú◊ô◊ú◊î',
                '◊ï◊î◊ú◊ë ◊©◊ú◊ô ◊©◊ë◊ï◊®',
                '◊ê◊†◊ô ◊ñ◊ï◊õ◊® ◊ê◊ô◊ö ◊©◊î◊ë◊ò◊ó◊™',
                '◊©◊™◊ó◊ñ◊ï◊® ◊ú◊§◊†◊ô ◊©◊ô◊¢◊ë◊ï◊®.',
                '◊ê◊û◊®◊™ ◊†◊°◊ô◊ô◊ù ◊ê◊™ ◊î◊û◊ú◊ó◊û◊î ◊î◊ñ◊ê◊™',
                '◊†◊†◊¶◊ó ◊ï◊†◊ó◊ñ◊ï◊®',
                '◊ê◊ë◊ú ◊î◊†◊î ◊†◊©◊ê◊®◊™◊ô ◊ú◊ë◊ì◊ô',
                '◊¢◊ù ◊ó◊ï◊® ◊©◊ó◊ï◊®.'
            ],
            english: [
                'There are a million stars tonight',
                'And my heart is broken',
                'I remember how you promised',
                'That you would return before it was over.',
                'You said we will finish this war',
                'We will win and come back',
                'But here I am, left alone',
                'With a black hole.'
            ],
            transliteration: [
                'Yesh milyon kochavim halayla',
                'Ve\'halev sheli shavur',
                'Ani zocher eich she\'hivtachta',
                'She\'tachazor lifnei she\'yaavor.',
                'Amarta nesayem et hamilchama hazot',
                'Nenatzeach ve\'nachzor',
                'Aval hina nisharti levadi',
                'Im chor shachor.'
            ]
        },
        context: "This song was written by Yiftach Kerzner in memory of his friend Tom Farkash, an IAF helicopter pilot who was killed in the Second Lebanon War in 2006. Tom's sister, Amit Farkash, performed it, and her emotional delivery turned it into one of modern Israel's most well-known songs of mourning. It speaks to the younger generation's experience of loss and has become a staple of Yom HaZikaron ceremonies.",
        analysis: {
            theme: 'Modern Loss',
            era: '2000s',
            emotion: 'Heartbroken, Intimate',
            difficulty: 'Beginner'
        }
    },
    {
        id: 'bab-el-wad',
        title: 'Bab el-Wad',
        hebrewTitle: '◊ë◊ê◊ë ◊ê◊ú ◊ï◊ï◊ê◊ì',
        artist: 'Yafa Yarkoni',
        youtubeId: '3LwT2JgVjeo',
        description: 'A memorial song for the soldiers who fell trying to break the siege of Jerusalem in the 1948 War of Independence.',
        tags: ['Yom HaZikaron', 'Jerusalem', 'War of Independence'],
        lyrics: {
            hebrew: [
                '◊§◊î ◊ê◊†◊ô ◊¢◊ï◊ë◊®, ◊†◊ô◊¶◊ë ◊ú◊ô◊ì ◊î◊ê◊ë◊ü.',
                '◊õ◊ë◊ô◊© ◊ê◊°◊§◊ú◊ò ◊©◊ó◊ï◊®, ◊°◊ú◊¢◊ô◊ù ◊ï◊®◊õ◊°◊ô◊ù.',
                '◊¢◊®◊ë ◊ê◊ò ◊ô◊ï◊®◊ì, ◊®◊ï◊ó ◊ô◊ù ◊†◊ï◊©◊ë◊™',
                '◊ê◊ï◊® ◊õ◊ï◊õ◊ë ◊®◊ê◊©◊ï◊ü ◊û◊¢◊ú ◊ë◊ô◊™ ◊û◊ó◊°◊ô◊®.',
                '◊ë◊ê◊ë ◊ê◊ú ◊ï◊ï◊ê◊ì,',
                '◊ú◊†◊¶◊ó ◊ñ◊õ◊ï◊® ◊†◊ê ◊ê◊™ ◊©◊û◊ï◊™◊ô◊†◊ï,',
                '◊©◊ô◊ô◊®◊ï◊™ ◊§◊®◊¶◊ï ◊ë◊ì◊®◊ö ◊ê◊ú ◊î◊¢◊ô◊®.'
            ],
            english: [
                'Here I pass, standing by the stone.',
                'A black asphalt road, rocks and ridges.',
                'Evening slowly falls, a sea breeze blows',
                'The light of the first star over Beit Machsir.',
                'Bab el-Wad,',
                'Forever remember our names,',
                'Convoys broke through on the road to the city.'
            ],
            transliteration: [
                'Po ani over, nitzav leyad ha\'even.',
                'Kvish asfalt shachor, sla\'im u\'rechasim.',
                'Erev at yored, ruach yam noshevet',
                'Or kochav rishon me\'al Beit Machsir.',
                'Bab el Wad,',
                'Lanetzach zechor na et shmoteinu,',
                'Shayarot partzu baderech el ha\'ir.'
            ]
        },
        context: "Bab el-Wad (Sha'ar HaGai in Hebrew) is a valley on the Tel Aviv-Jerusalem highway where fierce battles took place during the 1948 War of Independence. Convoys trying to break the Arab siege of Jerusalem were ambushed there, with heavy casualties. The song, with words by Haim Gouri, gives voice to the fallen, asking passersby to remember their sacrifice which opened the road to the city. The rusted, armored vehicles of those convoys are still preserved on the side of the road today as a memorial.",
        analysis: {
            theme: 'Sacrifice & Memory',
            era: '1940s',
            emotion: 'Solemn, Commemorative',
            difficulty: 'Advanced'
        }
    },
    {
        id: 'anachnu-nisharim',
        title: 'We are Staying',
        hebrewTitle: '◊ê◊†◊ó◊†◊ï ◊†◊©◊ê◊®◊ô◊ù',
        artist: 'Dudu Zakai',
        youtubeId: 'u2cVLrRUd4I',
        description: 'A defiant song of continuity and connection to the land, written after the evacuation of Yamit in Sinai.',
        tags: ['Resilience', 'Hope', 'Peace'],
        lyrics: {
            hebrew: [
                '◊î◊§◊®◊ó◊ô◊ù ◊ô◊ì◊û◊û◊ï ◊ë◊¢◊ï◊ì ◊©◊†◊î',
                '◊ë◊¶◊ë◊¢◊ô◊ù ◊©◊î◊ô◊ï ◊ú◊§◊†◊ô ◊ï◊ê◊ó◊®◊ô',
                '◊ï◊ê◊†◊ó◊†◊ï ◊†◊î◊ô◊î ◊©◊†◊ô◊†◊ï ◊õ◊ê◊ü',
                '◊ë◊í◊©◊û◊ô◊ù ◊ï◊ë◊®◊ï◊ó◊ï◊™ ◊î◊°◊™◊ô◊ï ◊î◊ê◊ó◊®◊ô◊ù',
                '◊õ◊ô ◊ê◊†◊ó◊†◊ï ◊†◊©◊ê◊®◊ô◊ù',
                '◊ê◊†◊ó◊†◊ï ◊†◊©◊ê◊®◊ô◊ù'
            ],
            english: [
                'The flowers will bleed in another year',
                'In colors that were before and after',
                'And we will both be here',
                'In the rains and winds of other autumns',
                'Because we are staying',
                'We are staying'
            ],
            transliteration: [
                'Haprachim yedamemu be\'od shana',
                'Bitzvaim shehayu lifnei ve\'acharei',
                'Ve\'anachnu nihiye shneinu kan',
                'Bagshamim uveruchot hastav ha\'acherim',
                'Ki anachnu nisharim',
                'Anachnu nisharim'
            ]
        },
        context: "Written by Halel Mittelpunkt after the wrenching 1982 evacuation of the Israeli settlement of Yamit in the Sinai Peninsula as part of the peace treaty with Egypt. The song became an anthem of the settlers who felt uprooted, expressing a deep-seated determination to remain connected to the Land of Israel, no matter the political circumstances. It captures a sense of defiant permanence and love for the land itself.",
        analysis: {
            theme: 'Continuity',
            era: '1980s',
            emotion: 'Determined, Bittersweet',
            difficulty: 'Intermediate'
        }
    },
    {
        id: 'paamon-kaved',
        title: 'A Heavy Bell',
        hebrewTitle: '◊§◊¢◊û◊ï◊ü ◊õ◊ë◊ì',
        artist: 'Dan Almagor',
        youtubeId: 'u4k7rR0Vz4w',
        description: 'A poem written in the immediate, raw aftermath of the Yom Kippur War, lamenting the loss of an entire generation.',
        tags: ['Yom HaZikaron', 'Loss', 'Yom Kippur War'],
        lyrics: {
            hebrew: [
                '◊¶◊ú◊¶◊ï◊ú ◊©◊ú ◊§◊¢◊û◊ï◊ü ◊õ◊ë◊ì ◊ï◊®◊ù',
                '◊î◊ô◊î ◊¶◊®◊ô◊ö ◊ú◊î◊¢◊ô◊® ◊ê◊™ ◊õ◊ú ◊î◊¢◊ù',
                '◊ï◊ú◊î◊ñ◊õ◊ô◊® ◊ú◊õ◊ï◊ú◊†◊ï ◊©◊ï◊ë ◊ï◊©◊ï◊ë',
                '◊ê◊™ ◊û◊î ◊©◊õ◊ë◊® ◊õ◊û◊¢◊ò ◊†◊©◊õ◊ó',
                '◊©◊¢◊ú ◊î◊ë◊†◊ô◊ù ◊©◊†◊§◊ú◊ï ◊ë◊û◊ú◊ó◊û◊î',
                '◊¢◊ì◊ô◊ô◊ü ◊ú◊ê ◊©◊ï◊ú◊û◊î ◊î◊û◊ß◊ì◊û◊î.'
            ],
            english: [
                'The ring of a heavy and loud bell',
                'Should have woken the entire nation',
                'And reminded us all, again and again',
                'That which was almost forgotten',
                'That for the sons who fell in the war',
                'The down payment has not yet been made.'
            ],
            transliteration: [
                'Tziltzul shel pa\'amon kaved veram',
                'Haya tzarich leha\'ir et kol ha\'am',
                'Ulehazkir lekulanu shuv veshuv',
                'Et ma shekvar kimat nishkach',
                'She\'al habanim shenoflu bamilchama',
                'Adayin lo shulma hamikdama.'
            ]
        },
        context: "This song, with sharp lyrics by Dan Almagor, is a piece of social and political criticism written in the wake of the Yom Kippur War. It laments the societal forgetfulness and the return to normalcy that often follows conflict, arguing that the nation has not fully paid its debt or learned its lesson from the sacrifice of its fallen soldiers. It's a call for perpetual remembrance and accountability.",
        analysis: {
            theme: 'National Memory',
            era: '1970s',
            emotion: 'Critical, Somber',
            difficulty: 'Advanced'
        }
    },
    {
        id: 'ktov-et-ze-be-iparon',
        title: 'Write it with a Pencil',
        hebrewTitle: '◊õ◊™◊ï◊ë ◊ê◊™ ◊ñ◊î ◊ë◊¢◊ô◊§◊®◊ï◊ü',
        artist: 'Samy Samir',
        youtubeId: '16gY_aAlaas',
        description: 'The story of a Holocaust survivor who asks for his concentration camp number to be written in pencil, hoping to one day erase it.',
        tags: ['Yom HaShoah', 'Hope', 'Resilience'],
        lyrics: {
            hebrew: [
                '◊õ◊™◊ï◊ë ◊ê◊™ ◊ñ◊î ◊ë◊¢◊ô◊§◊®◊ï◊ü',
                '◊ë◊™◊ï◊ö ◊î◊ß◊®◊ï◊ü ◊î◊ó◊™◊ï◊ù',
                '◊ê◊ù ◊ú◊ê ◊™◊û◊¶◊ê ◊ß◊®◊ï◊ü',
                '◊õ◊™◊ï◊ë ◊¢◊ú ◊î◊¢◊¶◊û◊ï◊™ ◊©◊ú◊ô',
                '◊ï◊ê◊ù ◊ê◊†◊ô ◊ê◊û◊ï◊™',
                '◊™◊ó◊ô◊î ◊ê◊™◊î, ◊™◊°◊§◊® ◊ê◊™◊î',
                '◊û◊î ◊©◊ß◊®◊î ◊ú◊ô.'
            ],
            english: [
                'Write it with a pencil',
                'Inside the sealed train car',
                'If you cannot find a car',
                'Write on my bones',
                'And if I die',
                'You will live, you will tell',
                'What happened to me.'
            ],
            transliteration: [
                'Ktov et ze be\'iparon',
                'Betoch hakaron hechatum',
                'Im lo timtza karon',
                'Ktov al ha\'atzamot sheli',
                'Ve\'im ani amut',
                'Tichyeh ata, tesaper ata',
                'Ma shekara li.'
            ]
        },
        context: "Based on the poem by Dan Pagis, a Holocaust survivor. The original poem speaks of Eve in the Garden of Eden, but the song adaptation powerfully re-contextualizes it to the Holocaust. The line 'write it with a pencil' captures a heartbreaking, almost naive hope that the horrific reality could somehow be temporary or erasable. It is a profound meditation on memory, testimony, and the impossible desire to undo trauma.",
        analysis: {
            theme: 'Testimony & Trauma',
            era: 'Post-Holocaust',
            emotion: 'Haunting, Fragile',
            difficulty: 'Advanced'
        }
    },
    {
        id: 'magash-hakesef',
        title: 'The Silver Platter',
        hebrewTitle: '◊û◊í◊© ◊î◊õ◊°◊£',
        artist: 'Natan Alterman (Poem)',
        youtubeId: 'h8s6A4h-0-s',
        description: 'A famous poem depicting the fallen soldiers of 1948 as the "silver platter" on which the state of Israel was founded.',
        tags: ['Yom HaZikaron', 'Sacrifice', 'War of Independence'],
        lyrics: {
            hebrew: [
                '◊ï◊î◊ê◊®◊• ◊™◊©◊ß◊ï◊ò, ◊¢◊ô◊ü ◊©◊û◊ô◊ô◊ù ◊ê◊ï◊ì◊û◊™',
                '◊™◊¢◊û◊¢◊ù ◊ú◊ê◊ô◊ò◊î ◊¢◊ú ◊í◊ë◊ï◊ú◊ï◊™ ◊¢◊©◊†◊ô◊ù.',
                '◊ï◊ê◊ï◊û◊î ◊™◊¢◊û◊ï◊ì, ◊ß◊®◊ï◊¢◊™ ◊ú◊ë ◊ê◊ö ◊†◊ï◊©◊û◊™',
                '◊ú◊ß◊ë◊ú ◊ê◊™ ◊î◊†◊° ◊î◊ê◊ó◊ì, ◊ê◊ô◊ü ◊©◊†◊ô.',
                '...◊ï◊ê◊ñ ◊ô◊¶◊ê◊ï ◊†◊¢◊®◊î ◊ï◊†◊¢◊®',
                '◊ï◊ê◊ò ◊ê◊ò ◊ô◊¶◊¢◊ì◊ï ◊î◊ù ◊û◊ï◊ú ◊î◊ê◊ï◊û◊î.',
                '◊ú◊ë◊ï◊©◊ô ◊ó◊í ◊ï◊ß◊®◊ë, ◊õ◊ë◊ì◊ô ◊†◊©◊ß ◊ï◊ß◊°◊ù',
                '◊ï◊ô◊ê◊û◊®◊ï: ◊ê◊†◊ó◊†◊ï ◊û◊í◊© ◊î◊õ◊°◊£',
                '◊©◊¢◊ú◊ô◊ï ◊ú◊ö ◊†◊ô◊™◊†◊î ◊û◊ì◊ô◊†◊™ ◊î◊ô◊î◊ï◊ì◊ô◊ù.'
            ],
            english: [
                'And the land will grow still, the red eye of the sky',
                'Will slowly dim over smoking borders.',
                'And a nation will stand, heartbroken but breathing',
                'To receive the one miracle, there is no second.',
                '...And then a girl and a boy will step forward',
                'And slowly they will march before the nation.',
                'Dressed for festival and battle, heavy with weapons and charm',
                'And they will say: We are the silver platter',
                'On which the Jewish state was given to you.'
            ],
            transliteration: [
                'Veha\'aretz tishkot, ein shamayim odemet',
                'Te\'am\'em le\'itah al gvulot ashenim.',
                'Ve\'umah ta\'amod, kru\'at lev ach noshemet',
                'Lekabel et hanes ha\'echad, ein sheni.',
                '...Ve\'az yitz\'u na\'arah ve\'na\'ar',
                'Ve\'at at yitz\'adu hem mul ha\'umah.',
                'Levushei chag u\'krav, kvedei neshek ve\'kesem',
                'Veyomru: Anachnu magash hakesef',
                'She\'alav lach nitna medinat hayehudim.'
            ]
        },
        context: "Natan Alterman's iconic 1947 poem is not a song in the traditional sense, but its recitation is a pillar of Yom HaZikaron. It answers a hypothetical question from Chaim Weizmann that a state is not given on a silver platter. Alterman's response is that the state *was* delivered on a silver platter‚Äîbut that platter was the generation of young men and women who gave their lives for its creation. It is the ultimate Israeli expression of the concept of national sacrifice.",
        analysis: {
            theme: 'National Sacrifice',
            era: '1940s',
            emotion: 'Solemn, Mythic',
            difficulty: 'Advanced'
        }
    }
];

// =================================================================================
//  WEBSITE FUNCTIONALITY
//  The code below powers the library, search, and player. No need to edit this.
// =================================================================================

document.addEventListener('DOMContentLoaded', () => {
    populateFilters();
    renderLibrary();

    const searchBar = document.getElementById('search-bar');
    searchBar.addEventListener('input', () => renderLibrary());
    
    document.querySelectorAll('#tag-filters button').forEach(button => {
        button.addEventListener('click', () => {
            button.classList.toggle('active');
            renderLibrary();
        });
    });
});

function populateFilters() {
    const allTags = new Set(songDatabase.flatMap(song => song.tags));
    const filtersContainer = document.getElementById('tag-filters');
    filtersContainer.innerHTML = ''; // Clear existing
    allTags.forEach(tag => {
        const button = document.createElement('button');
        button.textContent = tag;
        button.dataset.tag = tag;
        filtersContainer.appendChild(button);
    });
}

function renderLibrary() {
    const libraryContainer = document.getElementById('song-library');
    const noResultsDiv = document.getElementById('no-results');
    libraryContainer.innerHTML = '';

    const searchTerm = document.getElementById('search-bar').value.toLowerCase();
    const activeTags = Array.from(document.querySelectorAll('#tag-filters button.active')).map(b => b.dataset.tag);

    const filteredSongs = songDatabase.filter(song => {
        const matchesSearch = 
            song.title.toLowerCase().includes(searchTerm) ||
            song.artist.toLowerCase().includes(searchTerm) ||
            song.hebrewTitle.includes(searchTerm);
        
        const matchesTags = activeTags.length === 0 || activeTags.every(tag => song.tags.includes(tag));

        return matchesSearch && matchesTags;
    });
    
    if (filteredSongs.length === 0) {
        noResultsDiv.style.display = 'block';
    } else {
        noResultsDiv.style.display = 'none';
    }

    filteredSongs.forEach(song => {
        const card = document.createElement('div');
        card.className = 'song-card';
        card.onclick = () => loadSong(song.id);
        
        const tagsHtml = song.tags.map(tag => `<span class="tag">${tag}</span>`).join('');

        card.innerHTML = `
            <h3>${song.title}</h3>
            <div class="hebrew-title">${song.hebrewTitle}</div>
            <div class="artist">${song.artist}</div>
            <p class="description">${song.description}</p>
            <div class="tags">${tagsHtml}</div>
        `;
        libraryContainer.appendChild(card);
    });
}

function loadSong(songId) {
    const song = songDatabase.find(s => s.id === songId);
    if (!song) return;

    // Populate header
    document.getElementById('song-title').textContent = song.title;
    document.getElementById('hebrew-title').textContent = song.hebrewTitle;
    document.getElementById('song-artist').textContent = song.artist;

    // Embed YouTube video
    document.getElementById('youtube-embed-container').innerHTML = 
        `<iframe src="https://www.youtube.com/embed/${song.youtubeId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
    
    // Populate analysis
    document.getElementById('song-theme').textContent = song.analysis.theme;
    document.getElementById('song-era').textContent = song.analysis.era;
    document.getElementById('song-emotion').textContent = song.analysis.emotion;
    document.getElementById('song-difficulty').textContent = song.analysis.difficulty;
    
    // Populate lyrics
    const hebrewContainer = document.getElementById('hebrew-lyrics');
    const englishContainer = document.getElementById('english-lyrics');
    const transliterationContainer = document.getElementById('transliteration-lyrics');
    hebrewContainer.innerHTML = song.lyrics.hebrew.map(line => `<div class="lyric-line">${line}</div>`).join('');
    englishContainer.innerHTML = song.lyrics.english.map(line => `<div class="lyric-line">${line}</div>`).join('');
    transliterationContainer.innerHTML = song.lyrics.transliteration.map(line => `<div class="lyric-line">${line}</div>`).join('');

    // Populate context
    document.getElementById('song-context').innerHTML = `<p>${song.context.replace(/\n/g, '</p><p>')}</p>`;

    showView('player-section');
}

function showView(viewId) {
    document.getElementById('library-section').style.display = 'none';
    document.getElementById('player-section').style.display = 'none';
    document.getElementById('about-section').style.display = 'none';
    
    document.getElementById(viewId).style.display = 'block';

    document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
    if (viewId === 'library-section') {
        document.querySelector('.nav-button[onclick="showView(\'library-section\')"]').classList.add('active');
    } else if (viewId === 'about-section') {
        document.querySelector('.nav-button[onclick="showView(\'about-section\')"]').classList.add('active');
    }
    
    window.scrollTo(0, 0); // Scroll to top on view change
}

</script>
</body>
</html>
